include 'LAPPS'

def node = Nodes.localhost
if (args.vassar) {
	node = Nodes.vassar
}

def masc = Datasource {
	server node.server
	name "${node.id}:masc.text_1.3.0"
}

def annie = Service {
	server node.server
	name "${node.id}:gate.annie_1.3.0"
}

def index = masc.list()
index[0..9].each { key ->
	def document = masc.get(key)
	def result = annie.execute(document)
	def file = new File("/tmp/annie/${key}.xml")
	file.text = result.payload
	println "Wrote ${file.path}"
}

println "Done."

